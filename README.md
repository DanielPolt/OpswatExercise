# OpswatExercise
Program involving OPSWAT API for the OPSWAT Exercise
Run the program with Visual Studio Code.

Ensure libcurl is setup within the Visual Studio Code 2019 project containing the code. One should first in Powershell run the commands:
PS ${curl-dir}> git clone https://github.com/curl/curl.git
PS ${curl-dir}> cd winbuild
PS ${curl-dir}\winbuild> nmake /f Makefile.vc mode=static
One should then within the Project on Visual Studio Code:
-Open Project Properties.
-Add ${curl-dir}\builds\libcurl-vc-x86-release-static-ipv6-sspi-winssl\include to Configuration Properties -> VC++ Directories -> Include Directories.
-Add ${curl-dir}\builds\libcurl-vc-x86-release-static-ipv6-sspi-winssl\lib to Configuration Properties -> VC++ Directories -> Library Directories.
-Add CURL_STATICLIB to Configuration Properties -> C/C++ -> Preprocessor -> Preprocessor Definitions.
-In Configuration Properties -> Linker -> Input -> Additional Dependencies, add these followings lines-
    ${curl-dir}\builds\libcurl-vc-x86-release-static-ipv6-sspi-winssl\lib\libcurl_a.lib
    Ws2_32.lib
    Wldap32.lib
    Crypt32.lib
    Normaliz.lib
Additional details found here: https://medium.com/@farhabihelal/how-to-set-up-libcurl-on-visual-studio-2019-a9fdacce6945
Libcurl is a client-side URL Transfer Library that supports HTTP and HTTPS, among other things. It is used to call the API Commands within the C++ code. The code was generated by, in a command prompt, entering the CURL commands found within the MetaDefender Cloud curl commands with --libcurl fileName.cpp. This code does the work of the curl commands and were put into the various methods of the program, as well as some additional commands to put the results into a string value.

JSON and PicoSHA2, publically available resources from GitHub, are also used for JSON and Hashing. Download them respectively at:
https://github.com/nlohmann/json
and
https://github.com/okdshin/PicoSHA2
Then ensure that their corresponding #include lines at the beginning of the program follow the correct directory to the referenced files.
More details can be found on their respective GitHub pages.
nlogmann's JSON Library is a way to use JSON File Format in an intuitive way within the C++ environment. Data of the acceptable format can be used with JSON, and the data can then be parsed and evaluated as a data type. This aids in the evaluation and parsing of the program's scan results.
PicoSHA2 is a Hash Generator for C++. It can be used to hash a file in the SHA256 format. This allows the program to hash a file and see if there are previously cached results for the file. These results are retrieved if they do exist, and the file is instead uploaded if there are not previously cached results.

To utilize the project, set it up in a project within Visual Studio Code 2019. Also ensure there is a valid file within the repository for it to be tested with. The program is set up to use the included "TestDatFile.dat", but any file of a valid type can be used if the code itself is modified to use it and the file is present within the project's directory. Run the program with the "Local Windows Debugger" button on the top of the interface. A console will be brought up. The user will then be asked for a valid API Key. Enter one that works with MetaDefender Cloud. The file will then be hashed and a hash lookup is performed with this hash value. If previously cached results are not found, the file is uploaded and the results are retrieved through the Data ID of the file. The results are then outputted to the console, regardless of whether or not they were retrieved through a hash lookup or the Data ID Lookup.
